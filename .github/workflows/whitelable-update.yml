name: Release

on:
  push:
    tags:
      - '*'
    branches: [main]
  repository_dispatch:
    types: [whitelabel-update]
      
  release:
    types: [created]

jobs:

#   set_tag:
#       name: Set latest release tag in env
#       runs-on: ubuntu-latest
#       outputs:
#         latest_tag: ${{ steps.latest_tag.outputs.LATEST_RELEASE_TAG }}
#       steps:
#         - uses: actions/checkout@v2

#         - id: latest_tag
#           run: echo "::set-output name=LATEST_RELEASE_TAG::$(git describe --tags `git rev-list --tags --max-count=1`)"

  get_tag:
    name: Update Tags
#     needs: set_tag
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Get Latest Tag
#         run: echo "${{needs.set_tag.outputs.latest_tag}}"
        run: echo "$(git describe --tags `git rev-list --tags --max-count=1`)"

